module picklr.aws.Lambda

import "../Resource.pkl"

/// A Lambda Function.
class Function extends Resource.Resource {
  provider = "aws"

  /// The name of the function.
  functionName: String

  /// The runtime environment for the Lambda function.
  runtime: String

  /// The name of the method within your code that Lambda calls to execute your function.
  handler: String

  /// The ARN of the IAM role that Lambda assumes when it executes your function.
  role: String

  /// The path to the function's deployment package within the local filesystem.
  code: String? // Simplification: path to zip or directory

  properties = new {
    ["function_name"] = functionName
    ["runtime"] = runtime
    ["handler"] = handler
    ["role"] = role
    ["code"] = code
  }
}

/// A Lambda Layer.
class Layer extends Resource.Resource {
  provider = "aws"
  
  /// The name of the layer.
  name: String
  
  /// The description of the layer.
  description: String?
  
  /// The path to the ZIP file for the layer code.
  code: String
  
  /// A list of compatible runtimes.
  compatibleRuntimes: Listing<String>?

  properties = new {
    ["name"] = name
    ["description"] = description
    ["code"] = code
    ["compatible_runtimes"] = compatibleRuntimes
  }
}

/// A Lambda Permission.
class Permission extends Resource.Resource {
  provider = "aws"
  
  /// The name of the function.
  functionName: String
  
  /// The action the principal can use on the function.
  action: String
  
  /// The principal that is given permission to invoke the function.
  principal: String
  
  /// The source ARN for the permission.
  sourceArn: String?

  properties = new {
    ["function_name"] = functionName
    ["action"] = action
    ["principal"] = principal
    ["source_arn"] = sourceArn
  }
}
