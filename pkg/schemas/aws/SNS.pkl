module picklr.aws.SNS

import "../Resource.pkl"

/// An SNS Topic.
class Topic extends Resource.Resource {
  provider = "aws"

  /// The name of the topic.
  name: String

  /// The display name to use for a topic with SMS subscriptions.
  displayName: String?

  /// Designates a topic as FIFO.
  fifoTopic: Boolean = false

  /// Enables content-based deduplication (FIFO only).
  contentBasedDeduplication: Boolean = false

  /// The ID of an AWS-managed customer master key (CMK) for Amazon SNS or a custom CMK.
  kmsMasterKeyId: String?

  /// Tags.
  tags: Mapping<String, String>?

  properties = new Mapping {
    ["name"] = name
    ["display_name"] = displayName
    ["fifo_topic"] = fifoTopic
    ["content_based_deduplication"] = contentBasedDeduplication
    ["kms_master_key_id"] = kmsMasterKeyId
    ["tags"] = tags
  }
}

/// An SNS Subscription.
class Subscription extends Resource.Resource {
  provider = "aws"

  /// The ARN of the SNS topic to subscribe to.
  topicArn: String

  /// The protocol you want to use.
  protocol: String // http, https, email, sms, sqs, lambda

  /// The endpoint that you want to receive notifications.
  endpoint: String

  properties = new {
    ["topic_arn"] = topicArn
    ["protocol"] = protocol
    ["endpoint"] = endpoint
  }
}
